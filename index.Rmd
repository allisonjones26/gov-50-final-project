---
title: "Gov 50 Final Project"
author: Allison Jones 
description: "My final project"
output:
  distill::distill_article:
    self_contained: false
---

## Milestone 1 (Project thoughts) 

I am interested in exploring data related to types of Halloween candy and their popularity among consumers. In particular, I am curious to learn if Halloween candy containing nuts tends to be more popular than nut-free candy. The study’s findings might help consumers make informed choices when purchasing Halloween candy by ensuring consumers choose treats that are more likely to be enjoyed by trick-or-treaters.

## Milestone 2 (Project proposal)

Does the presence of peanuts or nuts in Halloween candy affect its popularity in matchups? I hypothesize that Halloween candies containing peanuts or nuts will be more popular in matchups compared to candies without peanuts or nuts. This hypothesis is rooted in the belief that the presence of peanuts or nuts adds a desirable nutty flavor and crunchy texture to candies that may contribute to an appealing sensory experience, which leads to an increase in candy popularity. My sample is comprised of 86 different Halloween candies with each candy being the unit of analysis. The explanatory variable of interest is whether the candy contains peanuts or nuts, and it is coded =1 for candies that contain peanuts or nuts and =0 for candies that do not contain peanuts or nuts. My outcome variable of interest is the popularity of each Halloween candy, as measured by the percentage of matchups won by each candy in an online preference matchup. This variable will indicate how well each candy performed in terms of winning matchups against other candies. For instance, if the variable was coded  = 67, it would mean that the candy won 67% of the matchups it was involved in. This variable is measured from Walt Hickey’s data set on Halloween candy preferences and relies on participant responses collected from the online preference matchup that included 8,371 different IP addresses that participated in voting on approximately 269,000 randomly generated matchups. In these matchups, participants were presented with pairs of candies and asked to choose their preferred candy from each pair. The popularity of each candy was determined by calculating the percentage of matchups it won. If I observe a significantly higher percentage of matchups won by candies containing peanuts or nuts compared to candies without peanuts or nuts, this would provide support for my hypothesis. Conversely, if I observe that candies without peanuts or nuts consistently win a significantly higher percentage of matchups or if there is no significant difference in the popularity of candies with and without peanuts or nuts, this would provide evidence against my hypothesis. When I run my regression of the count of the popularity of Halloween candies in matchups, a positive and significant coefficient for the presence of peanuts or nuts in the candy would suggest support for my hypothesis. 

## Milestone 3 (Data Visualization)
```{r echo = FALSE}
library(tidyverse)
library(ggplot2)
library(dplyr) 

candy <- read.csv("candy-data.csv")
```

## candy rankings (type of candy vs. matchups won)
```{r}
candy_rankings <- candy |> 
  mutate(`Types of Candy` = if_else(peanutyalmondy == 1, "Nut Candy", "Nut-Free Candy")) |>
  filter(! competitorname %in% c("One dime", "One quarter"))

candy_rankgings_graph <- candy_rankings |> 
  arrange(desc(winpercent)) |> 
  slice_max(winpercent, n = 15) |>
  ggplot(mapping = aes(x = winpercent, y = fct_reorder(competitorname, winpercent), fill =`Types of Candy`)) +
  geom_col() + 
  scale_fill_manual(values = c("steelblue1","indianred1")) +
  labs(x = "Percentage of Matchups Won by Candies", y = "Name of Candies", title = "Percentage of Matchups Won by Nut Candies vs. Nut-Free Candies", caption = "Walt Hickey's 538 Data Set")
candy_rankgings_graph
```
Walt Hickey's 538 data set about Halloween candy consists of 83 candies, each acting as an individual unit of analysis. The popularity of these Halloween candies were measured by the percentage of matchups won by each candy in an online preference matchup. This bar plot was produced after ranking all 83 candies in descending order, based on the percentage of matchups they won. Subsequently, the focus was narrowed by selecting a representative sample of the top 15 candies of the original 83. 

This bar plot supports my hypothesis that Halloween candies made with nuts (or nut products), classified as “Nut Candy” in the bar plot, are more popular among consumers than candies made without nuts (or nut products), classified as “Nut-Free Candy” in the bar plot. This assertion gains support when we consider that 8 out of the top 15 candies are “Nut Candies,” and these 8 “Nut Candies” maintained rankings within the top 11 positions, ranking as high as 1st, 2nd, and 5th places. Ultimately, the bar plot demonstrates compelling evidence that candies with nuts are more popular with treat-seeking consumers during the Halloween season. 

## linear regression (sugar content vs. matchups won)
```{r}
candy_rankings <- candy |> 
  mutate(`Types of Candy` = if_else(peanutyalmondy == 1, "Nut Candy", "Nut-Free Candy")) |>
  filter(! competitorname %in% c("One dime", "One quarter")) |> 
  slice_max(sugarpercent, n = 85) 

sugar_vs_win_graph <- candy_rankings |> 
  ggplot(aes(x = sugarpercent, y = winpercent, color = `Types of Candy`)) + 
  geom_point() + 
  scale_color_manual(values = c("steelblue1", "indianred1")) + 
  geom_smooth(method = "lm", se = FALSE, color = "black") + 
  geom_hline(yintercept = mean(candy_rankings$winpercent), linetype = "dashed") + 
  geom_vline(xintercept = mean(candy_rankings$sugarpercent), linetype = "dashed") + 
  labs(x = "Percentile of Sugar Content in Candies", y = "Percentile of Matchups Won by Candies", title = "Percentile of Sugar Content in Candies vs. Percentile of Matchups Won by Candies", caption = "Walt Hickey's 538 Data Set")
sugar_vs_win_graph 

```
Each candy in the dataset is represented as a point on the graph, with its position indicating both its sugar content percentile and its percentile of matchups won. The scatter plot indicates a strong correlation between higher sugar content and increased popularity in matchups. Notably, the upper right quadrant, representing candies with both above-average sugar content and high matchups won, features 8 out of the 13 nut candies. This suggests that candies with nuts not only tend to be sweeter but also outperform nut-free candies in terms of winning matchups. The findings suggest a preference for the combination of nutty flavors and increased sweetness. However, it is important to recognize that the scatterplot does not establish causation, and other unexplored factors may contribute to the observed patterns. 

